I"(function() {
  window.Spina = {};

  Trix.config.blockAttributes = $.extend(Trix.config.blockAttributes, {
    heading2: {
      tagName: "h2",
      terminal: true,
      breakOnReturn: true,
      group: false
    },
    heading3: {
      tagName: "h3",
      terminal: true,
      breakOnReturn: true,
      group: false
    },
    heading4: {
      tagName: "h4",
      terminal: true,
      breakOnReturn: true,
      group: false
    },
    heading5: {
      tagName: "h5",
      terminal: true,
      breakOnReturn: true,
      group: false
    },
    heading6: {
      tagName: "h6",
      terminal: true,
      breakOnReturn: true,
      group: false
    }
  });

  Spina.TrixAttachment = (function() {
    function TrixAttachment() {}

    TrixAttachment.photoSelect = function(e) {
      var editor_id;
      console.log('hi');
      editor_id = $(this).closest('trix-toolbar').data('trix-editor-id');
      return $.get("/admin/photos/trix_select//" + editor_id);
    };

    TrixAttachment.photoInsert = function(e, url) {
      var length;
      length = this.editor.getDocument().toString().length;
      this.editor.setSelectedRange(length - 1);
      return this.editor.insertHTML("<img src='" + url + "' />");
    };

    return TrixAttachment;

  })();

  document.addEventListener('trix-file-accept', function(e) {
    return e.preventDefault();
  });

  $(document).on('click', '.js-trix-photo', Spina.TrixAttachment.photoSelect);

  $(document).on('photo-insert', 'trix-editor', Spina.TrixAttachment.photoInsert);

}).call(this);
:ET