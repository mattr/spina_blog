I"(function() {
  var ready;

  $(document).on('click', '.table-clickable tbody tr', function(e) {
    var $row, checkbox, link;
    $row = $(this).closest('tr');
    link = $row.find('a.table-link:first')[0];
    if (link) {
      return link.click();
    } else {
      checkbox = $(this).find('input[type="checkbox"]:first, input[type="radio"]:first');
      if (checkbox.length > 0) {
        checkbox.prop("checked", !checkbox.prop("checked"));
        return e.stopPropagation();
      }
    }
  });

  $(document).on('click', '.table-clickable tbody tr td', function(e) {
    var checkbox;
    checkbox = $(this).find('input[type="checkbox"]:first, input[type="radio"]:first');
    if (checkbox.length > 0) {
      checkbox.prop("checked", !checkbox.prop("checked"));
      return e.stopPropagation();
    }
  });

  $(document).on('click', '.table-clickable tbody .table-link', function(e) {
    return e.stopPropagation();
  });

  $(document).on('click', '.table-clickable tbody tr input', function(e) {
    return e.stopPropagation();
  });

  $(document).on('keyup', '.search-input input', function(e) {
    $(this).parent().removeClass('animated small-shake');
    if ($(this).val() === "") {
      $(this).parent().find('.clear-input').fadeOut(200);
      if (e.keyCode === 13) {
        return $(this).parent().addClass('animated small-shake');
      }
    } else {
      return $(this).parent().find('.clear-input').fadeIn(200);
    }
  });

  $(document).on('click', '.clear-input', function() {
    var input, link;
    link = $(this);
    input = link.siblings('input');
    input.val("");
    input.focus();
    input.trigger("keyup");
    link.fadeOut(200);
    return false;
  });

  $(document).on('keyup + change', '.table-container .search-input input', function() {
    var datatable;
    datatable = $(this).parent().parent().find('table.datatable').dataTable();
    return datatable.fnFilter($(this).val());
  });

  $(document).on('change', '.dd', function() {
    var serialized, sort_url;
    serialized = $(this).nestable('serialize');
    sort_url = $(this).data('sort-url');
    return $.post(sort_url, {
      list: serialized
    });
  });

  ready = function() {
    var header, headerHeight;
    if (header = document.getElementById('header')) {
      headerHeight = header.getBoundingClientRect().height;
      $('section#main').css({
        paddingTop: headerHeight
      });
    }
    $('input[type="file"][data-customfileinput]:visible').each(function() {
      return $(this).customFileInput();
    });
    $('.new_photo').uploadPhoto();
    $('.new_document').uploadDocument();
    $('#login_wrapper').css('margin-top', $(document).innerHeight() / 8);
    $(".structure-form-menu ul").sortable({
      handle: '.sortable-handle'
    });
    if ($('input[data-switch]').length > 0) {
      $('input[data-switch]').spinaSwitch();
    }
    if ($('.datepicker').length > 0) {
      return $('.datepicker').datepicker({
        dateFormat: "dd-mm-yy",
        firstDay: 1
      });
    }
  };

  $(document).on('turbolinks:load', ready);

}).call(this);
:ET